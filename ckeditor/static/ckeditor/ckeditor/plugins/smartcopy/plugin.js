(function(d){var e="A ABBR ACRONYM BLOCKQUOTE BR DIV HR I IFRAME IMG LI OL P Q S STRIKE SUB SUP TABLE TR TD TH UL".split(" ");CKEDITOR.plugins.add("smartcopy",{init:function(a){var f,c;f=void 0!==a.config.smartCopyAllowedTags?a.config.smartCopyAllowedTags.map(function(a){return a.toUpperCase()}):e;(c=void 0!==a.config.smartCopyRemoveAttrs?a.config.smartCopyRemoveAttrs:void 0)&&d.inArray("style",c);a.on("paste",function(a){var e=a.data.html;a.stop();var g=document.createElement("div");g.innerHTML=
e;window.$wrapper=d(g);$wrapper.find("*").each(function(a,b){$el=d(b);if(b.nodeType===Node.ELEMENT_NODE&&-1===d.inArray(b.nodeName,f))b.innerHTML?$el.contents().unwrap():b.parentNode.removeChild(b);else if(c)for(a in c)$el.removeAttr(c[a])});a.editor.insertHtml($wrapper.html())})}})})(django.jQuery);