(function(){CKEDITOR.plugins.add("atlanticpagebreak",{init:function(b){b.addCommand("atlanticpagebreak",CKEDITOR.plugins.pagebreakCmd);b.ui.addButton("AtlanticPageBreak",{label:"Insert pagebreak",command:"atlanticpagebreak",icon:this.path+"images/pagebreak.gif"});CKEDITOR.env.opera&&b.on("contentDom",function(){b.document.on("click",function(c){c=c.data.getTarget();c.is("div")&&c.hasClass("pagebreak")&&b.getSelection().selectElement(c)})})},afterInit:function(b){var c=b.lang.pagebreakAlt,a=b.dataProcessor,
b=a&&a.dataFilter;(a=a&&a.htmlFilter)&&a.addRules({attributes:{"class":function(b,c){if("pagebreak"==b){var a=CKEDITOR.htmlParser.fragment.fromHtml("&nbsp;");c.children.length=0;c.add(a);a=c.attributes;delete a["aria-label"];delete a.contenteditable;delete a.title;delete a.style;return b}}}},5);b&&b.addRules({elements:{div:function(b){var a=b.attributes;"pagebreak"==a["class"]&&(a.contenteditable="false",a["data-cke-display-name"]="pagebreak",a["aria-label"]=c,a.title=c,a.style="clear:both;border-top:dotted 1px #D8D8D8;border-bottom:dotted 1px #D8D8D8;",
b.children.length=0)}}})},requires:["fakeobjects"]});CKEDITOR.plugins.pagebreakCmd={exec:function(b){var c=b.lang.pagebreakAlt,c=CKEDITOR.dom.element.createFromHtml('<div contenteditable="false" title="'+c+'" aria-label="'+c+'" data-cke-display-name="pagebreak" class="pagebreak">&nbsp;</div>',b.document),a=b.getSelection().getRanges(!0);b.fire("saveSnapshot");for(var d,e=a.length-1;0<=e;e--)if(d=a[e],e<a.length-1&&(c=c.clone(!0)),d.splitBlock("p"),d.insertNode(c),e==a.length-1){var f=c.getNext();
d.moveToPosition(c,CKEDITOR.POSITION_AFTER_END);if(!f||f.type==CKEDITOR.NODE_ELEMENT&&!f.isEditable())d.fixBlock(!0,b.config.enterMode==CKEDITOR.ENTER_DIV?"div":"p");d.select()}b.fire("saveSnapshot")}}})(django.jQuery);